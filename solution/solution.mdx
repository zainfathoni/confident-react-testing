import { Image } from '@mdx-deck/components'
import { Split } from 'mdx-deck/layouts'
import {
  CodeSurferLayout,
  CodeSurferColumnLayout,
  Code,
  Step,
} from 'code-surfer'
import ToggleFlipped from './ToggleFlipped.js'
import ToggleHooks from './ToggleHooks.js'
import ToggleMistake from './ToggleMistake.js'

# Solution

## Test Toggle using React Testing Library

---

<CodeSurferLayout>
  <Code
    code={require('!!raw-loader!./Toggle.test.0.js').default}
    focus="2[44:67]"
    lang="jsx"
    title="Test Toggle using React Testing Library"
  />
  <Code
    code={require('!!raw-loader!./Toggle.test.1.js').default}
    focus="2[10:15],7"
    lang="jsx"
    title="Test Toggle using React Testing Library"
    subtitle="Deep rendering"
  />
  <Code
    code={require('!!raw-loader!./Toggle.test.2.js').default}
    focus="7[13:21],9"
    lang="jsx"
    title="Test Toggle using React Testing Library"
    subtitle="Assert that the User sees 👀 'Off' text"
  />
  <Code
    code={require('!!raw-loader!./Toggle.test.3.js').default}
    focus="7[24:34],10"
    lang="jsx"
    title="Test Toggle using React Testing Library"
    subtitle="Assert that the User doesn't see 🙈 'On' text"
  />
  <Code
    code={require('!!raw-loader!./Toggle.test.4.js').default}
    focus="12[21:39]"
    lang="jsx"
    title="Test Toggle using React Testing Library"
    subtitle="User tries to find 🧐 a 'Toggle' text"
  />
  <Code
    code={require('!!raw-loader!./Toggle.test.4.js').default}
    focus="2[27:35],12"
    lang="jsx"
    title="Test Toggle using React Testing Library"
    subtitle="Then click it! 🖱"
  />
  <Code
    code={require('!!raw-loader!./Toggle.test.5.js').default}
    focus="14:15"
    lang="jsx"
    title="Test Toggle using React Testing Library"
    subtitle="Assert that the User now sees 👀 'On' instead of 'Off' text"
  />
  <Code
    code={require('!!raw-loader!./Toggle.test.js').default}
    focus="2[18:24],6"
    lang="jsx"
    title="Test Toggle using React Testing Library"
    subtitle="Clean up rendered DOM from the test"
  />
  <Code
    code={require('!!raw-loader!./Toggle.test.js').default}
    focus="2,6,9:17"
    lang="jsx"
    title="Test Toggle using React Testing Library"
  />
</CodeSurferLayout>

---

## Let's redo all our previous Demos!

---

## Demo 1

### Flip `toggle` State Representation

`true` ➡ Off

`false` ➡ On

---

<CodeSurferColumnLayout sizes={[1, 1]}>

<Step>
  <Code
    code={require('!!raw-loader!./Toggle.js').default}
    focus="6[13:17],16[15:48]"
    lang="jsx"
    title="Flip toggle State Representation"
    subtitle="true ➡ On | false ➡ Off"
  />
  <Code
    code={require('!!raw-loader!./ToggleFlipped.js').default}
    focus="6[13:16],16[16]"
    lang="jsx"
    title="Flip toggle State Representation"
    subtitle="true ➡ Off | false ➡ On"
  />
</Step>

</CodeSurferColumnLayout>

---

### End User 🆗

<ToggleFlipped />

---

### Test User ✅

<Split>
  <Image
    src={require('file-loader!./demo-1-test-result.png')}
    style={{
      margin: 'auto',
      height: '40vh',
      width: '40vw',
      backgroundPosition: 'right',
      backgroundSize: 'contain',
    }}
  />
  <Image
    src={require('file-loader!./demo-1-test-coverage.png')}
    style={{
      margin: '0 auto 0 0',
      height: '60vh',
      width: '60vw',
      backgroundPosition: 'left',
      backgroundSize: 'contain',
    }}
  />
</Split>

---

## Demo 2

### Swap Toggle with ToggleHooks

---

<CodeSurferColumnLayout sizes={[1, 1]}>

<Step title="Swap Toggle with ToggleHooks">
  <Code
    code={require('!!raw-loader!./App.js').default}
    focus="2[23:28]"
    lang="jsx"
    subtitle="Before"
  />
  <Code
    code={require('!!raw-loader!./AppHooks.js').default}
    focus="2[23:33]"
    lang="jsx"
    subtitle="After"
  />
</Step>

</CodeSurferColumnLayout>

---

### End User 🆗

<ToggleHooks />

---

### Test User ✅

<Split>
  <Image
    src={require('file-loader!./demo-2-test-result.png')}
    style={{
      margin: 'auto',
      height: '40vh',
      width: '40vw',
      backgroundPosition: 'right',
      backgroundSize: 'contain',
    }}
  />
  <Image
    src={require('file-loader!./demo-2-test-coverage.png')}
    style={{
      margin: '0 auto 0 0',
      height: '60vh',
      width: '60vw',
      backgroundPosition: 'left',
      backgroundSize: 'contain',
    }}
  />
</Split>

---

## Demo 3

### Make a mistake in Button event propagation

---

<CodeSurferColumnLayout sizes={[1, 1]}>

<Step>
  <Code
    code={require('!!raw-loader!../Button.js').default}
    focus="7[15:42]"
    lang="jsx"
    title="Careful Developer 🧐"
    subtitle="Pass onClick props correctly"
  />
  <Code
    code={require('!!raw-loader!../ButtonMistake.js').default}
    focus="7"
    lang="jsx"
    title="Careless Developer 🥴"
    subtitle="Forget to pass onClick props"
  />
</Step>

</CodeSurferColumnLayout>

---

### Test User ❌

<Split>
  <Image
    src={require('file-loader!./demo-3-test-result.png')}
    style={{
      margin: 'auto',
      height: '55vh',
      width: '55vw',
      backgroundPosition: 'right',
      backgroundSize: 'contain',
    }}
  />
  <Image
    src={require('file-loader!./demo-3-test-coverage.png')}
    style={{
      margin: '0 auto 0 0',
      height: '60vh',
      width: '60vw',
      backgroundPosition: 'left',
      backgroundSize: 'contain',
    }}
  />
</Split>

---

### End User 😡

<ToggleMistake />
